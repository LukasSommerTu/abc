aspect InlineMethod {
	
	public void MethodAccess.inline() {
		ASTNode n = inlineToAnonymousMethod().introduceOutParameter().open().inline();
		if(n instanceof Block)
			((Block)n).inline();
	}
	
	public void MethodDecl.doInline() {
		for(MethodAccess ma : this.polyUses())
			ma.doInline();
	}
	
	public void MethodAccess.doInline() {
    	Program root = programRoot();
		inline();
		root.eliminate(WITH_STMT, FRESH_VARIABLES, LOCKED_NAMES);
	}
}