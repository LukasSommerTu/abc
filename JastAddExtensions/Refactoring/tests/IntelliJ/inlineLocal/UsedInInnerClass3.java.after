public class IDEA17606 {
    // inserted declaration for compilability
    class Foo extends JComponent { }

    public void foo() {
        // try to inline 'preferences'
        final Bar bar = new Bar(new Preferences().getComponent());
        bar.toString();

        ThreadUtils.run(new Runnable() {
            public void run() {
                final Foo foo = new Foo();
                foo.setSize(new Preferences().getDimension().getSize());
            }
        });
    }

    // changed slightly for compilability
    class Preferences {
	public JComponent getComponent() {
            return null;
        }

	public Dimension getDimension() {
            return null;
	}
    }

    class Bar {
	public Bar(JComponent component) {
	}
    }

    class ThreadUtils {
        public void run(Runnable runnable) {
        }
    }
}
